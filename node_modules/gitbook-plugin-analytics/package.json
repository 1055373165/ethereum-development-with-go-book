{
  "_from": "gitbook-plugin-analytics",
  "_id": "gitbook-plugin-analytics@0.2.1",
  "_inBundle": false,
  "_integrity": "sha1-JyBWoDx+21qACGCzGOKea83CJSI=",
  "_location": "/gitbook-plugin-analytics",
  "_phantomChildren": {},
  "_requested": {
    "escapedName": "gitbook-plugin-analytics",
    "fetchSpec": "latest",
    "name": "gitbook-plugin-analytics",
    "raw": "gitbook-plugin-analytics",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#DEV:/",
    "#USER"
  ],
  "_resolved": "https://registry.npmjs.org/gitbook-plugin-analytics/-/gitbook-plugin-analytics-0.2.1.tgz",
  "_shasum": "272056a03c7edb5a800860b318e29e6bcdc22522",
  "_spec": "gitbook-plugin-analytics",
  "_where": "/Users/mota/Sandbox/ethereum-development-with-go",
  "author": {
    "name": "youngoat@163.com"
  },
  "bugs": {
    "url": "https://github.com/YounGoat/gitbook-plugin-analytics/issues"
  },
  "bundleDependencies": false,
  "dependencies": {},
  "deprecated": false,
  "description": "GitBook plugin for analytics (e.g. Google Analytics) purpose",
  "devDependencies": {},
  "engines": {
    "gitbook": ">=3.x.x"
  },
  "gitbook": {
    "properties": {}
  },
  "homepage": "https://github.com/YounGoat/gitbook-plugin-analytics#readme",
  "keywords": [
    "gitbook",
    "analytics",
    "google-analytics",
    "baidu-tongji"
  ],
  "license": "ISC",
  "main": "index.js",
  "name": "gitbook-plugin-analytics",
  "optionalDependencies": {},
  "readme": "#\tGitBook Plugin Analytics\n\n[![NPM](https://nodei.co/npm/gitbook-plugin-analytics.png?downloads=true&downloadRank=true&stars=true)](https://www.npmjs.com/package/gitbook-plugin-analytics)\n\n##\tTable Of Contents\n\n*\t[Links](#links)\n*\t[Get Started](#get-started)\n*\t[Advanced Configs](#advanced-configs)\n\t*\t[Example 1, Different Analytics In Different Contexts](#config-contexts)\n\t*\t[Example 2, Split The Context Into Parts](#config-context-details)\n\t*\t[Example 3, Simplify The Config, Extracting Bases](#config-extracting-bases)\n\t*\t[Example 4, Simplify The Config, Predefining Vendors](#config-predefining-vendors)\n*\t[Before We Start](#prepare)\n\n##\tLinks\n\n*\t[Homepage](https://github.com/YounGoat/gitbook-plugin-analytics)\n*\t[Change Log](./CHANGELOG.md)\n\n##\tGet Started\n\nFirstly, edit *book.json* which should be located at the root dir of a gitbook. If it does not exist, create it!\n\n```javascript\n// book.json\n{\n\t// ...\n\n\t\"plugins\": [\n\t\t// ...,\n\t\t\"analytics\"\n\t],\n\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t\"google\": \"TOKEN-1\",\n\t\t\t\"baidu\": \"TOKEN-2\"\n\t\t}\n\t}\n}\n```\n\nSecondly, run the next commands to active the plugin:\n\n```bash\n# Change dir to the gitbook's root dir.\n\n# Install the plugins.\ngitbook install\n\n# Build the the book,\ngitbook build\n# OR, serve it.\ngitbook serve\n```\n\n##\tAdvanced Configs\n\nAs the previous section described, it's so easy to active [Google Analytics](https://analytics.google.com) or [Baidu Tongji](http://tongji.baidu.com) by adding responding tokens in ``pluginsConfig``.\n\nHowever, sometimes the ``_book`` folder generated by gitbook may be copied and released to locations other than gitbook.com. So, THE PLUGIN allows to be enabled in some situations and disabled in others. And, it also allows you to use different analytics for different situations.\n\n<a name=\"config-contexts\"></a>\n\n###\tExample 1, Different Analytics In Different Contexts  \n\nA context is defined by a base URL:\n\n```javascript\n{\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t/* Here \"context\" is a fixed property name, NOT name of vendor. */\n\t\t\t\"context\": [\n\t\t\t\t// ...,\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-1\",\n\t\t\t\t\t\"base\": \"http://home.example.com/mybook/\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-2\",\n\t\t\t\t\t\"base\": \"http://mybook.example.com:8080/\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n}\n```\n\nThe *base* property may be in one of next forms:\n\n*\tfull base url, e.g.   \n\t``http://home.example.com/mybook/``\n\n*\tbase url without protocol, e.g.  \n\t``//home.example.com/mybook/``\n\n*\tonly protocol, which should be one of the following:\n\t*\thttp\n\t*\thttps\n\n*\tonly hostname, e.g.   \n\t``home.example.com``\n\n*\tonly port, e.g.  \n\t``8080``\n\n*\tonly host (hostname and port), e.g.   \n\t``mybook.example.com:8080``\n\n*\tonly base path (must begin with a slash \"/\"), e.g.   \n\t``/mybook/``\n\n\nThe *base* property may also be an array, e.g.\n\n```javascript\n{\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t/* Here \"context\" is a fixed property name, NOT name of vendor. */\n\t\t\t\"context\": [\n\t\t\t\t// ...,\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-1\",\n\t\t\t\t\t\"base\": [\n\t\t\t\t\t\t\"http://home.example.com/mybook/\",\n\t\t\t\t\t\t\"http://www.example.com/mybook/\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-2\",\n\t\t\t\t\t\"base\": \"http://mybook.example.com:8080/\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n}\n```\n\n<a name=\"config-context-details\"></a>\n\n###\tExample 2, Split The Context Into Parts  \n\n```javascript\n{\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t/* Here \"context\" is a fixed property name, NOT name of vendor. */\n\t\t\t\"context\": [\n\t\t\t\t// ...,\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-1\",\n\t\t\t\t\t\"hostname\": \"home.example.com\",\n\t\t\t\t\t\"path\": \"/mybook/\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-2\",\n\t\t\t\t\t\"hostname\": \"mybook.example.com\",\n\t\t\t\t\t\"port\": \"8080\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n}\n```\n\nActually, we may define the context with next details:\n\n*\t*protocol*\n*\t*hostname*\n*\t*host*\n*\t*port*\n*\t*path*\n\nThe bundled analytics will only be enabled when all details specified matching. Each context property may be a string or an array, e.g.\n\n```javascript\n{\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t/* Here \"context\" is a fixed property name, NOT name of vendor. */\n\t\t\t\"context\": [\n\t\t\t\t// ...,\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-1\",\n\t\t\t\t\t\"hostname\": [ \"home.example.com\", \"www.example.com\" ],\n\t\t\t\t\t\"path\": \"/mybook/\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\t\"token\": \"TOKEN-2\",\n\t\t\t\t\t\"hostname\": \"mybook.example.com\",\n\t\t\t\t\t\"port\": [ \"8080\", \"8088\" ]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n}\n```\n\n<a name=\"config-extracting-bases\"></a>\n\n###\tExample 3, Simplify The Config, Extracting Bases  \n\nThe *base* values may be extracted to be the keyname of *analytics* object, as long as it DOES NOT EQUAL TO:\n\n*\tvendor codes, including\n\t*\t*baidu*  \n\t*\t*google*  \n*\tor other preserved keywords, including\n\t*\t*context*  \n\t*\t*contexts*  \n\t*\t*vendor*  \n\t*\t*vendors*\n\n```javascript\n{\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t// ...,\n\t\t\t\"//home.example.com/mybook/\": {\n\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\"token\": \"TOKEN-1\"\n\t\t\t},\n\t\t\t\"mybook.example.com:8080\": {\n\t\t\t\t\"vendor\": \"google\",\n\t\t\t\t\"token\": \"TOKEN-2\"\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\nIn these cases, *vendor* and *token* can also be expressed with an array. e.g.\n\n```javascript\n{\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t// ...,\n\t\t\t\"//home.example.com/mybook\": [ \"google\", \"TOKEN-1\" ],\n\t\t\t\"mybook.example.com\": [ \"google\", \"TOKEN-2\" ] /* vendor first, and token follows */\n\t\t}\n\t}\n}\n```\n\n<a name=\"config-predefining-vendors\"></a>\n\n###\tExample 4, Simplify The Config, Predefining Vendors  \n\n```javascript\n{\n\t\"pluginsConfig\": {\n\t\t// ...,\n\t\t\"analytics\": {\n\t\t\t// ...,\n\t\t\t/* \"vendors\" and \"vendor\" are preserved keywords. */\n\t\t\t\"vendors\": {\n\t\t\t\t/* This keyname is user defined. */\n\t\t\t\t/* The value is an object made up of \"vendor\" and \"token\". */\n\t\t\t\t\"MY_ANALITICS_NAME_1\": { \"vendor\": \"google\", \"token\": \"TOKEN-1\" },\n\n\t\t\t\t/* The value may also be an array\n\t\t\t\t   vendor code first and token follows. */\n\t\t\t\t\"MY_ANALITICS_NAME_2\": [ \"google\", \"TOKEN-2\" ],\n\n\t\t\t\t/* The value may also be a group of analytics. */\n\t\t\t\t\"MY_ANALITICS_NAME_3\": [\n\t\t\t\t\t[ \"google\", \"TOKEN-3\" ],\n\t\t\t\t\t[ \"baidu\", \"TOKEN-4\" ]\n\t\t\t\t]\n\t\t\t},\n\t\t\t/* Apply analytics to specified base. */\n\t\t\t\"//home.example.com/mybook/\": \"MY_ANALITICS_NAME_1\",\n\t\t\t\"mybook.example.com:8080\": \"MY_ANALITICS_NAME_2\",\n\t\t\t\"mybook.example.com\": \"MY_ANALITICS_NAME_3\"\n\t\t}\n\t}\n}\n```\n\n<a name=\"prepare\"></a>\n\n##\tBefore We Start\n\nATTENTION: Gitbook project config file *book.json* is JSON format, in which no comment is allowed. So, the C-style comments in example configs should be deleted in real config file.\n\nTHE PLUGIN is compitable with gitbook >= 3.x.x. If the gitbook engine you installed is an older one, THE PLUGIN does not work, and the next message will be printed in console when you build or serve your book:\n\n```bash\n# ...\ninfo: load plugin gitbook-plugin-analytics ....ERROR\n# ...\nError: Error loading plugins: gitbook-plugin-analytics. Run 'gitbook install' to install plugins from NPM.\n```\n\nStop trying to run ``gitbook install`` again and again, it's vain.\n\n__DO NOT know what is the current version of gitbook?__ Run the next command to see:\n\n```bash\n# List installed versions of gitbook engine.\ngitbook verions\n# One or more versions will be listed row by row.\n# The one prefixed with * is the currrent version.\n\n# Force install specific version of gitbook engine if necessary.\ngitbook versions:install 3.2.2\n```\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/YounGoat/gitbook-plugin-analytics.git"
  },
  "scripts": {
    "test": "mocha"
  },
  "version": "0.2.1"
}
